package com.bms;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import java.util.ResourceBundle;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.bms.server.DMSSocketServer;

public class VJ_BatteryMonitoringSystem_TcpListener_Main {
	public static SimpleDateFormat gDateFormate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); // HH means 24 and hh
																								// means 12

	static Logger logger = LoggerFactory.getLogger(VJ_BatteryMonitoringSystem_TcpListener_Main.class.getName());
	// private static org.apache.logging.log4j.Logger logger =
	// LogManager.getLogger();
	static ResourceBundle rb = ResourceBundle.getBundle("portConfig", Locale.getDefault());

	static String packet = "2355502C434841524745522D30322C31383A31373A30332C31302F31322F323032342C30000B43485F4D4E4C494E4532354B5631302F31322F32303234000101001414FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000059380000000000000000000000000000000000000000000000002710000000000000000000000000000040000000000000000000000000000000000000A8332E";

	public static void main(String[] args) {
		serverRunnig();
//      localRunning();
		// testmethods();

	}

	public static void localRunning() {
		// new
		// RawDataProcessing().packetProcess("242C564A52412C31323A31343A30302C30352F31312F323031392C38393931303030393032333637373330303939462C3130302E38342E3131302E3137302C3430343439303639353433383233333030302C4C4D502C564A52412C4656312E30312C4E522C30312C4C2C3335333633353038303639393933332C415033384141303030312C312C3035313131392C3036343532352C313732372E313439392C4E2C30373832332E323732312C452C302E302C302E302C30322C3531342E322C322E322C322E322C22494E442061697274656C222C312C312C30302E30302C30302E30302C302C432C32392C3430342C34392C344632462C424530332C0D0A234D4F4E493A2043656C6C20204253494320204C4143202043656C6C49642020415246434E20202020506F776572202043312020433220205441202052785175616C2020504C4D4E0D0A234D4F4E493A202053202020203433202034463246202020424530332020202020203730202020202D353664626D202020202034352020343520202D3120202020203020202020494E442061697274656C0D0A234D4F4E493A204E31202020203731202034463246202020353631392020202020203236202020202D363664626D20202020202D3120202D310D0A234D4F4E493A204E32202020203636202034463246202020424530322020202020203635202020202D353664626D20202020202D3120202D310D0A234D4F4E493A204E33202020204646202046464646202020303030302020202020203239202020202D353964626D20202020202D3120202D310D0A234D4F4E493A204E34202020203534202034463246202020374243422020202020203637202020202D363964626D20202020202D3120202D310D0A234D4F4E493A204E35202020203637202034463246202020393234312020202020203330202020202D363764626D20202020202D3120202D310D0A234D4F4E493A204E362020202046462020464646462020203030303020202020202020302020202D31313164626D2C303030302C30302C3030303031362C414142422C3030302E3030302E3030302E3030302C303030303030303030302C303030302C30303030303030302C30302C414141414141414141412C302C3030303030303030303030303030303030303030303030302C30303030303030302C2A01000147414655454C53454E534F5235000AE60000067203130000054600000001040B130C0F050000000000007717001D0000A4B1002100000110000000000000000000000000000000000000000000000000");

		// GeneralData _GeneralData=new
		// GeneralDataParser().parseData("2355502C474152424D53303030312C31363A33343A30302C31372F31322F323031392C30000B56414A5241424D53313930303133302F30332F323031380001050A2020FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0000005C41F93BAD0000000000000000423BF69E41CC04F842CB4C6C00000000000015363FA156703FE14AED00000000000000000000000600000000016401520000000027882E");
		// System.out.println(_GeneralData.toString());
		// String
		// packet="2355502C474152424D53303030312C31363A33343A30302C31372F31322F323031392C30000B56414A5241424D53313930303133302F30332F323031380001050A2020FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0000005C41F93BAD0000000000000000423BF69E41CC04F842CB4C6C00000000000015363FA156703FE14AED00000000000000000000000600000000016401520000000027882E";

		String errorPacket = "2355502C434841524745522D30312C30383A32393A30322C33302F31312F323032342C304346C00040B8000042480000447A0400000000002E"
				+ "";
		// String
		// errorPacket="2355462C56414A524157424D53312C31323A35303A30382C31392F31322F323031392C30000B56414A524157424D533030303131382F31322F32303139000506082020FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF132E03EB41FC41E742AFD2D44084D82E4173D95341CE97DF44030E3B000000AA000006CC3E57CDC74097F0860000000041968BD50000000900000000014E030107150000E28631000B56414A524157424D533030303131382F31322F32303139000506082020FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF132E03EB41FC41E742AFD2D44084D82E4173D95341CE97DF44030E3B000000AA000006CC3E57CDC74097F0860000000041968BD50000000900000000014E030107150000E2862E";
		new BMSDataProcessing().packetProcess(packet);

		// BMSAlarmStatus _bMSAlarmStatus=new BMSAlarmStatusParser().parse("00030200");
		// System.out.println("data:"+_bMSAlarmStatus.toString());
		// int bytecount=36;
		// DeviceDataWithLastIndex _batteryMonitoringDataWithLastIndex=new
		// BatteryMonitoringDataParser().parse(bytecount, packet);

		// List<CellVoltageData> _listCellVoltageData=new ArrayList<CellVoltageData>();
		// Collections.copy(_listCellVoltageData,
		// _batteryMonitoringDataWithLastIndex.getBatteryMonitoringData().getCellVoltageData());
		// _listCellVoltageData=_batteryMonitoringDataWithLastIndex.getBatteryMonitoringData().getCellVoltageData();

		// System.out.println("bytecount "+bytecount);

		// BMSAlarmStatus _bMSAlarmStatus= new BMSAlarmStatusParser().parse("0001050A");
		// System.out.println(_bMSAlarmStatus.toString());

		// String
		// cellvoltagePacket="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF";
		// String
		// celltempPacket="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF";

		// new CellVoltageTemperatureDataParser().parse(cellvoltagePacket);

	}

	public static void testmethods() {
		// String
		// pck="2355502C54535452414E53434F312C31343A34343A30312C33302F31312F323032302C30270F54535452414E53434F424D533131372F31302F3230323000050200685F08E3095408E0098508DA092B09330954097E0953094808E809870977098F0987098108D408E3097A08DD08E8090E0962091C097E08E608ED08E208FA08D50970098908DE08DC08CF092C08D709530938088B090B08D5094508BE0999098408D4094B097C09810983083408C30911092B095008DA094F097B097C08A3099409910925097E097F098F098A08D1089609520954097E094508CB08D708DA08D3094A096308E608D608C1093C094F094008DD0932096508B008D208D1098508E208B30AA209AB099C098D09B5099F099B098A0019001800190018001B001A001A001A001C001C001A001B00160018001B00170018001900190018001B001C001C00180018001A001B00190019001800170017001A0018001B001B001B0018001A0017001B0017001700170019001B001B001B00190019001900170015001700190018001A00170016001C001B001B001A001B001A0019001A001A001B001B001A0017001700180018001800180018001D00170017001A00180018001800180019001900170017001B00180018001700180019001D001A001A001B001A001D001D001E5F82033740534DAA3F8E3663401BA4C13FD92C7943EF2B8F42669B7C00001EC80000073A42EA841B4149945B41D47CF141D813AB0000003F27100000002400010A510000EB502E";
		// new MongodbRawDataSaving().mongodbRawDataInsertion(pck);
		for (int i = 0; i < 20000; i++) {
			Date dt = new Date();
			logger.info("i:" + i + " Checking....." + gDateFormate.format(dt));
		}

	}

	public static void mangoDbData() {

	}

	public static void serverRunnig() {
		try {
			new DMSSocketServer().portListening(Integer.parseInt(rb.getString("portNumber").trim()));// for Bms
		} catch (Exception ex) {
			System.out.println("ServerRunning issue:" + ex);
		}
	}

	public static void testing() {
		new BMSDataProcessing().packetProcess("testing");
	}
}
